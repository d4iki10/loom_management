<%# 発注済み商品の編集 %>
<h1><%= t('view.users.admin.edit.title') %></h1>

<%# フォームが表示される前にエラーメッセージを表示するためform_withの前に書く %>
<% if @order.errors.any? %>

<%# Railsがデフォルトで用意しているエラー用のスタイル（CSS）を適用 %>
<div id="error_explanation">
  <h2><%= @order.errors.count %> 件のエラーがあります</h2>
  <ul>
    <% @order.errors.full_messages.each do |message| %>
    <li><%= message %></li>
    <% end %>
  </ul>
</div>
<% end %>

<%= form_with model: @order, url: admin_order_path(@order), local: true do |f| %>
<table>
  <thead>
    <tr>
      <th>項目</th>
      <th>現在の値</th>
      <th>変更後の値</th>
    </tr>
  </thead>
  <tbody>
    <!-- 企業名 -->
    <tr>
      <td>企業名</td>
      <td><%= @order.company&.name || "企業情報なし" %></td>
      <td>
        <%= f.collection_select :company_id,
                                Company.all,
                                :id,
                                :name,
                                prompt: "新しい企業を選択" %>
      </td>
    </tr>

    <!-- 商品番号 -->
    <tr>
      <td>商品番号</td>
      <td><%= @order.product_number&.number || "番号なし" %></td>
      <td>
        <%= f.collection_select :product_number_id,
                                ProductNumber.all,
                                :id,
                                :number,
                                prompt: "新しい商品番号を選択" %>
      </td>
    </tr>

    <!-- 色番号 -->
    <tr>
      <td>色番号</td>
      <td><%= @order.color_number&.color_code || "色番号なし" %></td>
      <td>
        <%= f.collection_select :color_number_id,
                                ColorNumber.all,
                                :id,
                                :color_code,
                                prompt: "新しい色番号を選択" %>
      </td>
    </tr>

    <!-- ロール数 -->
    <tr>
      <td>ロール数</td>
      <td><%= @order.roll_count || "未設定" %></td>
      <td>
        <%= f.number_field :roll_count, placeholder: "新しいロール数を入力" %>
      </td>
    </tr>

    <!-- 数量 -->
    <tr>
      <td>数量</td>
      <td><%= @order.quantity || "未設定" %></td>
      <td>
        <%= f.number_field :quantity, placeholder: "新しい数量を入力" %>
      </td>
    </tr>

    <!-- 開始日 -->
    <tr>
      <td>開始日</td>
      <td><%= @order.start_date&.strftime("%Y-%m-%d") || "日付なし" %></td>
      <td>
        <%= f.date_field :start_date, placeholder: "新しい開始日を入力" %>
      </td>
    </tr>
  </tbody>
</table>

<!-- 提出ボタン -->
<%= f.submit t('helpers.submit.update'), id: 'update-order' %>
<%= link_to t('common.back'), admin_orders_path, id: 'back' %>
<% end %>
